# This is a sample root makefile for The Instant Build System.
# Copy it to your project directory and modify according to your needs.

# Include the generated by configure config.mak
-include config.mak
# Local user file which can be used to override some of the settings (e.g. MODE)
-include local-config.mak

# Check if the project has been configured
ifndef TARGET
$(error You must run configure before starting compiling)
endif

# The directory where tibs makefiles are located
DIR.TIBS ?= tibs

# Default build mode
MODE ?= release

# Want automatic .dep building
AUTODEP ?= 1

# Extra files to include in distribution
DISTEXTRA += config.mak sample-local-config.mak

# Additional toolkit rules
SUBMAKEFILES += $(DIR.TIBS)/extra/avr-gcc.mak

# Default toolkit
ifeq ($(ARCH),avr)
TOOLKIT ?= AVR-GCC
else
TOOLKIT ?= GCC
endif

# Build tools if they aren't available
ifndef MAKEDEP
MAKEDEP = $(OUT)makedep$(EXE)
MAKEDEP_DEP = $(MAKEDEP)
endif

include $(DIR.TIBS)/rules.mak
# Additional rules
include tibs/extra/flash-rules.mak
